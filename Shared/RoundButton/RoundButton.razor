@using System.Reactive;
@using System.Reactive.Threading.Tasks;
@inject IJSRuntime JSRuntime;

<link href="css/RoundButton.css" rel="stylesheet" />

<div class="round @(Big == true ? "big" : "small")">
    <MatIconButton Disabled=@Disabled @onclick="@OnClick" Icon=@Icon></MatIconButton>
</div>

@code {
    [Parameter]
    public string Icon { get; set; }

    [Parameter]
    public bool Disabled { get; set; } = false;

    [Parameter]
    public bool Big { get; set; } = false;

    [Parameter]
    public EventCallback Click { get; set; }

    void OnClick()
    {
        Click.InvokeAsync(null);
        Task.Delay(250).ToObservable().Subscribe(_ => JSRuntime.InvokeAsync<Unit>("loseFocus", null));
    }
}
